<Window x:Class="Quizmester.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Quizmester"
        mc:Ignorable="d"
        Title="Quizmester" Height="1080" Width="1920"
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen"
        Background="#1A1A2E" WindowStyle="None">

    <Window.Resources>
        <!-- Button Styles -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#FF6B35"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="25,12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="25"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF8C5A"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#E55A2B"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#E74C3C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="20"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#C0392B"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.03" ScaleY="1.03"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Answer Button Styles  -->
        <Style x:Key="AnswerButtonRed" TargetType="Button">
            <Setter Property="Background" Value="#E21B3C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Height" Value="80"/>
            <Setter Property="MinWidth" Value="300"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="15"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Grid>
                                <Polygon Fill="White" 
                                        Points="20,20 40,30 20,40" 
                                        HorizontalAlignment="Left" 
                                        VerticalAlignment="Center"
                                        Margin="10,-10,0,0"/>
                                <ContentPresenter HorizontalAlignment="Center" 
                                                VerticalAlignment="Center"
                                                Margin="0,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF4365"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AnswerButtonBlue" TargetType="Button">
            <Setter Property="Background" Value="#1368CE"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Height" Value="80"/>
            <Setter Property="MinWidth" Value="300"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="15"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Grid>
                                <Rectangle Fill="White" 
                                          Width="20" Height="20"
                                          HorizontalAlignment="Left" 
                                          VerticalAlignment="Center"
                                          Margin="20,0,0,0"/>
                                <ContentPresenter HorizontalAlignment="Center" 
                                                VerticalAlignment="Center"
                                                Margin="20,0,20,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#3498DB"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AnswerButtonYellow" TargetType="Button">
            <Setter Property="Background" Value="#D89E00"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Height" Value="80"/>
            <Setter Property="MinWidth" Value="300"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="15"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Grid>
                                <Rectangle Fill="White"
                                   Width="20"
                                   Height="20"
                                   HorizontalAlignment="Left"
                                   VerticalAlignment="Center"
                                   Margin="-10,30,0,0">
                                    <Rectangle.RenderTransform>
                                        <RotateTransform Angle="45"
                                             CenterX="50"
                                             CenterY="50"/>
                                    </Rectangle.RenderTransform>
                                </Rectangle>
                                <ContentPresenter HorizontalAlignment="Center" 
                                                VerticalAlignment="Center"
                                                Margin="0,0,0,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#F1C40F"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="AnswerButtonGreen" TargetType="Button">
            <Setter Property="Background" Value="#26890C"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="FontSize" Value="20"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="10"/>
            <Setter Property="Height" Value="80"/>
            <Setter Property="MinWidth" Value="300"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}"
                                CornerRadius="15"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <Grid>
                                <Ellipse Fill="White" 
                                        Width="30" Height="30"
                                        HorizontalAlignment="Left" 
                                        VerticalAlignment="Center"
                                        Margin="20,0,0,0"/>
                                <ContentPresenter HorizontalAlignment="Center" 
                                                VerticalAlignment="Center"
                                                Margin="40,0,20,0"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#27AE60"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.05" ScaleY="1.05"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Input Styles -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="#F8F9FA"/>
            <Setter Property="BorderBrush" Value="#E9ECEF"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                        Focusable="false"
                                        HorizontalScrollBarVisibility="Hidden"
                                        VerticalScrollBarVisibility="Hidden"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#FF6B35"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="ModernPasswordBoxStyle" TargetType="PasswordBox">
            <Setter Property="Background" Value="#F8F9FA"/>
            <Setter Property="BorderBrush" Value="#E9ECEF"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="PasswordBox">
                        <Border x:Name="border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ScrollViewer x:Name="PART_ContentHost" 
                                        Focusable="false"
                                        HorizontalScrollBarVisibility="Hidden"
                                        VerticalScrollBarVisibility="Hidden"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsKeyboardFocused" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="#FF6B35"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <!-- Welcome Screen -->
        <Grid x:Name="WelcomeScreen" Visibility="Collapsed">
            <Grid.Background>
                <RadialGradientBrush>
                    <GradientStop Color="#FF6B35" Offset="0"/>
                    <GradientStop Color="#1A1A2E" Offset="1"/>
                </RadialGradientBrush>
            </Grid.Background>

            <!-- Close Button -->
            <Button Content="✕"
                    Width="60" Height="60"
                    FontSize="24" FontWeight="Bold"
                    Background="#E74C3C" Foreground="White"
                    BorderThickness="0"
                    HorizontalAlignment="Right" VerticalAlignment="Top"
                    Margin="30"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Click="ExitApplicationButton"/>

            <!-- Welcome Content -->
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <!-- Logo/Icon -->
                <Border Background="White" 
                        CornerRadius="50"
                        Width="100" Height="100"
                        Margin="0,0,0,30">
                    <TextBlock Text="🎯" 
                              FontSize="50"
                              HorizontalAlignment="Center" 
                              VerticalAlignment="Center"/>
                </Border>

                <TextBlock Text="QUIZMESTER"
                          FontSize="72" FontWeight="Black"
                          Foreground="White"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,10"/>

                <TextBlock Text="Test Your Knowledge, Challenge Your Mind!"
                          FontSize="24" FontWeight="Light"
                          Foreground="#CCCCCC"
                          HorizontalAlignment="Center"
                          Margin="0,0,0,50"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <Button Content="LOGIN"
                            Width="200" Height="60"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Margin="10"
                            Click="LoginButton"/>

                    <Button Content="CREATE ACCOUNT"
                            Width="200" Height="60"
                            Background="#9B59B6" 
                            Style="{StaticResource PrimaryButtonStyle}"
                            Margin="10"
                            Click="CreateAccountButton"/>
                </StackPanel>
            </StackPanel>
        </Grid>

        <!-- Login Screen -->
        <Grid x:Name="LoginScreen" Visibility="Collapsed">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#667eea" Offset="0"/>
                    <GradientStop Color="#764ba2" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>

            <Border Background="White" 
                    CornerRadius="25" 
                    Padding="50" 
                    Width="450" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center">

                <StackPanel>
                    <!-- Login Icon -->
                    <Border Background="#FF6B35" 
                            CornerRadius="30"
                            Width="60" Height="60"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,20">
                        <TextBlock Text="👤" 
                                  FontSize="30"
                                  HorizontalAlignment="Center" 
                                  VerticalAlignment="Center"/>
                    </Border>

                    <TextBlock Text="Welcome Back!"
                              FontSize="32" FontWeight="Bold"
                              Foreground="#2C3E50"
                              HorizontalAlignment="Center"
                              Margin="0,0,0,30"/>

                    <!-- Username -->
                    <TextBlock Text="USERNAME" 
                              FontSize="14" FontWeight="SemiBold"
                              Foreground="#7F8C8D"
                              Margin="0,0,0,8"/>
                    <TextBox x:Name="UsernameBox"
                            Height="50"
                            Style="{StaticResource ModernTextBoxStyle}"
                            Margin="0,0,0,20"/>

                    <!-- Password -->
                    <TextBlock Text="PASSWORD" 
                              FontSize="14" FontWeight="SemiBold"
                              Foreground="#7F8C8D"
                              Margin="0,0,0,8"/>
                    <PasswordBox x:Name="PasswordBox"
                                Height="50"
                                Style="{StaticResource ModernPasswordBoxStyle}"
                                Margin="0,0,0,30"/>

                    <!-- Buttons -->
                    <Button Content="LOGIN"
                            Height="50"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Margin="0,0,0,15"
                            Click="InsertLoginButton"/>

                    <Button Content="BACK"
                            Height="45"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Click="BackButton"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Create Account Screen -->
        <Grid x:Name="CreateAccountScreen" Visibility="Collapsed">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#a8edea" Offset="0"/>
                    <GradientStop Color="#fed6e3" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>

            <Border Background="White" 
                    CornerRadius="25" 
                    Padding="50" 
                    Width="450" 
                    HorizontalAlignment="Center" 
                    VerticalAlignment="Center">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="10" BlurRadius="20" Opacity="0.3"/>
                </Border.Effect>

                <StackPanel>
                    <!-- Create Account Icon -->
                    <Border Background="#9B59B6" 
                            CornerRadius="30"
                            Width="60" Height="60"
                            HorizontalAlignment="Center"
                            Margin="0,0,0,20">
                        <TextBlock Text="✨" 
                                  FontSize="30"
                                  HorizontalAlignment="Center" 
                                  VerticalAlignment="Center"/>
                    </Border>

                    <TextBlock Text="Join Quizmester!"
                              FontSize="32" FontWeight="Bold"
                              Foreground="#2C3E50"
                              HorizontalAlignment="Center"
                              Margin="0,0,0,30"/>

                    <!-- Username -->
                    <TextBlock Text="USERNAME" 
                              FontSize="14" FontWeight="SemiBold"
                              Foreground="#7F8C8D"
                              Margin="0,0,0,8"/>
                    <TextBox x:Name="CreateUsernameBox"
                            Height="50"
                            Style="{StaticResource ModernTextBoxStyle}"
                            Margin="0,0,0,20"/>

                    <!-- Password -->
                    <TextBlock Text="PASSWORD" 
                              FontSize="14" FontWeight="SemiBold"
                              Foreground="#7F8C8D"
                              Margin="0,0,0,8"/>
                    <PasswordBox x:Name="CreatePasswordBox"
                                Height="50"
                                Style="{StaticResource ModernPasswordBoxStyle}"
                                Margin="0,0,0,30"/>

                    <!-- Buttons -->
                    <Button Content="CREATE ACCOUNT"
                            Height="50"
                            Background="#9B59B6"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Margin="0,0,0,15"
                            Click="InsertCreateAccountButton"/>

                    <Button Content="BACK"
                            Height="45"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Click="BackButton"/>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Quiz Choice Screen -->
        <Grid x:Name="QuizChoiceScreen" Visibility="Collapsed">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#1A1A2E" Offset="0"/>
                    <GradientStop Color="#16213E" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>

            <ScrollViewer VerticalScrollBarVisibility="Hidden">
                <StackPanel>
                    <!-- Header Section -->
                    <Grid Height="300" Margin="0,0,0,50">
                        <Grid.Background>
                            <RadialGradientBrush>
                                <GradientStop Color="#FF6B35" Offset="0"/>
                                <GradientStop Color="#FF8C42" Offset="1"/>
                            </RadialGradientBrush>
                        </Grid.Background>

                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                            <TextBlock Text="🎮" 
                                      FontSize="80"
                                      HorizontalAlignment="Center"
                                      Margin="0,0,0,20"/>

                            <TextBlock Text="Choose Your Quiz Adventure"
                                      FontSize="48" FontWeight="Black"
                                      Foreground="White"
                                      HorizontalAlignment="Center"
                                      Margin="0,0,0,10"/>

                            <TextBlock Text="Select a quiz and start your knowledge journey!"
                                      FontSize="20" FontWeight="Light"
                                      Foreground="#EEEEEE"
                                      HorizontalAlignment="Center"/>
                            <Button Name="CreateQuizButton"
                                    Content="CREATE QUIZ"
                                    Width="180" Height="50"
                                    Style="{StaticResource PrimaryButtonStyle}"
                                    Margin="0,20,0,0"
                                    Click="OnCreateQuiz"/>
                        </StackPanel>
                    </Grid>

                    <!-- Quiz Cards -->
                    <ItemsControl ItemsSource="{Binding QuizChoices}" 
                                 HorizontalAlignment="Center">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel HorizontalAlignment="Center"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <Border Background="White" 
                                        CornerRadius="20" 
                                        Margin="15" 
                                        Padding="25"
                                        Width="350"
                                        Height="200">
                                    <Border.Effect>
                                        <DropShadowEffect ShadowDepth="5" BlurRadius="15" Opacity="0.2"/>
                                    </Border.Effect>

                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="*"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding QuizTitle}" 
                                                      FontSize="24" FontWeight="Bold" 
                                                      Foreground="#2C3E50"
                                                      TextAlignment="Center"
                                                      Margin="0,0,0,10"/>

                                            <TextBlock Text="{Binding QuizDescription}" 
                                                      FontSize="16" 
                                                      Foreground="#7F8C8D"
                                                      TextAlignment="Center"
                                                      TextWrapping="Wrap"/>

                                            <TextBlock Text="{Binding QuizId}" 
                                                      FontSize="12" 
                                                      Foreground="#BDC3C7"
                                                      TextAlignment="Center"
                                                      Margin="0,5,0,0"
                                                      Visibility="Collapsed"/>
                                        </StackPanel>

                                        <Button Grid.Row="1"
                                               Content="START QUIZ"
                                               Style="{StaticResource PrimaryButtonStyle}"
                                               HorizontalAlignment="Stretch"
                                               Height="45"
                                               Margin="0,20,0,0"
                                               Click="OnStartQuiz"
                                               CommandParameter="{Binding QuizId}"/>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </ScrollViewer>
        </Grid>

        <!-- Quiz Screen -->
        <!-- Quiz Screen -->
        <Grid x:Name="QuizScreen" Visibility="Visible">
            <Grid.Background>
                <RadialGradientBrush>
                    <GradientStop Color="#4834d4" Offset="0"/>
                    <GradientStop Color="#130f40" Offset="1"/>
                </RadialGradientBrush>
            </Grid.Background>
            <Grid x:Name="Overlay"
              Background="Red"
              Opacity="0"
              Visibility="Collapsed"
              Panel.ZIndex="99" />
            <ItemsControl ItemsSource="{Binding Quiz}" 
                  HorizontalAlignment="Center"
                  VerticalAlignment="Center">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Background="White"
                        CornerRadius="25"
                        Padding="40"
                        MaxWidth="900"
                        MinWidth="700"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="10" BlurRadius="25" Opacity="0.3"/>
                            </Border.Effect>

                            <StackPanel>
                                <!-- Question Header -->
                                <TextBlock Text="Question:"
                                  FontSize="16" FontWeight="SemiBold"
                                  Foreground="#7F8C8D"
                                  HorizontalAlignment="Center"
                                  Margin="0,0,0,10"/>

                                <TextBlock
                                    Text="{Binding CurrentQuestion}"
                                    Foreground="#7F8C8D"
                                    HorizontalAlignment="Center"
                                    Margin="0,0,0,10"/>

                                <!-- Progress Bar -->
                                <ProgressBar Minimum="0" Maximum="30" Value="20" 
                                   Height="8" 
                                   Margin="0,0,0,30">
                                    <ProgressBar.Template>
                                        <ControlTemplate TargetType="ProgressBar">
                                            <Border CornerRadius="4" Background="#E9ECEF">
                                                <Rectangle x:Name="PART_Indicator" 
                                                  Fill="#FF6B35" 
                                                  RadiusX="4" RadiusY="4" 
                                                  HorizontalAlignment="Left"/>
                                            </Border>
                                        </ControlTemplate>
                                    </ProgressBar.Template>
                                </ProgressBar>

                                <!-- Question Text -->
                                <TextBlock Text="{Binding QuestionText}"
                                  FontSize="32" FontWeight="Bold"
                                  Foreground="#2C3E50"
                                  TextAlignment="Center"
                                  TextWrapping="Wrap"
                                  Margin="0,0,0,40"/>

                                <!-- Answer Options -->
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Button Grid.Row="0" Grid.Column="0"
                                       Content="{Binding QuizAnswerOne}"
                                       Style="{StaticResource AnswerButtonRed}"
                                       Click="AnswerOne"
                                       Tag="1"/>

                                    <Button Grid.Row="0" Grid.Column="1"
                                       Content="{Binding QuizAnswerTwo}"
                                       Style="{StaticResource AnswerButtonBlue}"
                                       Click="AnswerTwo"
                                       Tag="2"/>

                                    <Button Grid.Row="1" Grid.Column="0"
                                       Content="{Binding QuizAnswerThree}"
                                       Style="{StaticResource AnswerButtonYellow}"
                                       Click="AnswerThree"
                                       Tag="3"/>

                                    <Button Grid.Row="1" Grid.Column="1"
                                       Content="{Binding QuizAnswerFour}"
                                       Style="{StaticResource AnswerButtonGreen}"
                                       Click="AnswerFour"
                                       Tag="4"/>
                                </Grid>
                                <StackPanel>

                                    <Button Content="skip" Click="SkipButton"/>
                                    <Button Content="joker" Click="JokerButton"/>

                                </StackPanel>
                                <!-- Timer Display-->
                                <StackPanel Orientation="Horizontal" 
                                  HorizontalAlignment="Center"
                                  Margin="0,30,0,0">
                                    <TextBlock Text="⏰" FontSize="24" Margin="0,0,10,0"/>
                                    <!--Bind to parent's TimerText using RelativeSource. -->
                                    <TextBlock Text="{Binding DataContext.TimerText, RelativeSource={RelativeSource AncestorType=ItemsControl}}" 
                                     FontSize="20" 
                                     Margin="10"
                                     Foreground="Red"
                                     FontWeight="Bold"/>
                                </StackPanel>
                            </StackPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>

        <!-- Quiz Maker Screen -->
        <Grid x:Name="QuizMakeScreen" Visibility="Collapsed">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#1e3799" Offset="0"/>
                    <GradientStop Color="#0c2461" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>

            <Border Background="White"
                    CornerRadius="25"
                    Padding="40"
                    Width="700"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="10" BlurRadius="25" Opacity="0.3"/>
                </Border.Effect>

                <StackPanel>
                    <!-- Header -->
                    <TextBlock Text="🧠 CREATE A NEW QUIZ"
                       FontSize="32" FontWeight="Bold"
                       Foreground="#2C3E50"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,20"/>

                    <!-- Quiz Name -->
                    <TextBlock Text="Quiz Title:" FontWeight="SemiBold" Foreground="#7F8C8D"/>
                    <TextBox x:Name="QuizTitleInput"
                     Text="Enter quiz title..."
                     Margin="0,5,0,20"
                     FontSize="16"/>

                    <!-- Quiz Name -->
                    <TextBlock Text="Quiz description:" FontWeight="SemiBold" Foreground="#7F8C8D"/>
                    <TextBox x:Name="QuizDescriptionInput"
                         Text="Enter quiz title..."
                         Margin="0,5,0,20"
                         FontSize="16"/>

                    <!-- save button -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="Save Question"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Width="200" Height="50"
                            Click="SaveQuiz_button"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

        <Grid x:Name="QuizMakeScreen2" Visibility="Collapsed">

            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#1e3799" Offset="0"/>
                    <GradientStop Color="#0c2461" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
            <Border Background="White"
                    CornerRadius="25"
                    Padding="40"
                    Width="700"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="10" BlurRadius="25" Opacity="0.3"/>
                </Border.Effect>

                <StackPanel>
                    <TextBlock Text="Question:" FontWeight="SemiBold" Foreground="#7F8C8D"/>
                    <TextBox x:Name="QuestionInput"
                 Text="Enter question text..."
                 Margin="0,5,0,20"
                 FontSize="16" Height="60" TextWrapping="Wrap"/>

                    <!-- Answer Options -->
                    <TextBlock Text="Answers:" FontWeight="SemiBold" Foreground="#7F8C8D" Margin="0,0,0,10"/>
                    <UniformGrid Columns="2" Rows="2" Margin="0,0,0,20" HorizontalAlignment="Stretch">
                        <TextBox x:Name="Answer1Input" Text="Answer 1" Margin="5" FontSize="16"/>
                        <TextBox x:Name="Answer2Input" Text="Answer 2" Margin="5" FontSize="16"/>
                        <TextBox x:Name="Answer3Input" Text="Answer 3" Margin="5" FontSize="16"/>
                        <TextBox x:Name="Answer4Input" Text="Answer 4" Margin="5" FontSize="16"/>
                    </UniformGrid>

                    <!-- Correct Answer -->
                    <TextBlock Text="Correct Answer (1–4):" FontWeight="SemiBold" Foreground="#7F8C8D"/>
                    <ComboBox x:Name="CorrectAnswerInput"
                  Margin="0,5,0,30"
                  FontSize="16"
                  SelectedIndex="0">
                        <ComboBoxItem Content="1"/>
                        <ComboBoxItem Content="2"/>
                        <ComboBoxItem Content="3"/>
                        <ComboBoxItem Content="4"/>
                    </ComboBox>

                    <!-- Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Button Content="Save Question"
                    Style="{StaticResource PrimaryButtonStyle}"
                    Width="200" Height="50"
                    Click="SaveQuestion_Click"/>

                        <Button Content="Back"
                    Style="{StaticResource SecondaryButtonStyle}"
                    Width="150" Height="50"
                    Click="BackToMain_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
        <!-- Admin Screen -->
        <Grid x:Name="AdminScreen" Visibility="Collapsed">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#2C3E50" Offset="0"/>
                    <GradientStop Color="#34495E" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>

            <Border Background="White"
            CornerRadius="25"
            Padding="30"
            Width="900"
            Height="600"
            HorizontalAlignment="Center"
            VerticalAlignment="Center">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="10" BlurRadius="20" Opacity="0.3"/>
                </Border.Effect>

                <DockPanel>
                    <!-- Header -->
                    <StackPanel DockPanel.Dock="Top" Margin="0,0,0,20">
                        <TextBlock Text="🔧 ADMIN PANEL"
                           FontSize="36"
                           FontWeight="Bold"
                           Foreground="#2C3E50"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>

                        <Button Content="BACK TO MAIN"
                        Style="{StaticResource PrimaryButtonStyle}"
                        HorizontalAlignment="Center"
                        Width="200" Height="40"
                        Click="BackButton"/>
                    </StackPanel>

                    <!-- Tabs for managing Users & Quizzes -->
                    <TabControl>
                        <!-- USERS TAB -->
                        <TabItem Header="👥 Accounts">
                            <ScrollViewer>
                                <Grid Margin="10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- User list -->
                                    <DataGrid x:Name="UsersGrid"
                                      AutoGenerateColumns="True"
                                      IsReadOnly="False"
                                      Grid.Row="0"
                                      Margin="0,0,0,10"
                                      AlternatingRowBackground="#F7F9FA"
                                      BorderBrush="#BDC3C7"
                                      BorderThickness="1"/>

                                    <!-- Buttons -->
                                    <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Right"
                                        Grid.Row="1">
                                        <Button Content="Save Changes" Width="120" Click="SaveUsers_Click" />
                                        <Button Content="Delete User" Width="120" Click="DeleteUser_Click"/>
                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>

                        <!-- QUIZZES TAB -->
                        <TabItem Header="🧠 Quizzes">
                            <ScrollViewer>
                                <Grid Margin="10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- Quiz list -->
                                    <DataGrid x:Name="QuizzesGrid"
                                          AutoGenerateColumns="True"
                                          IsReadOnly="False"
                                          Grid.Row="0"
                                          Margin="0,0,0,10"
                                          AlternatingRowBackground="#F7F9FA"
                                          BorderBrush="#BDC3C7"
                                          BorderThickness="1"/>

                                    <!-- Buttons -->
                                    <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Right"
                                        Grid.Row="1">
                                        <Button Content="Save Changes" Width="120" Click="SaveQuizes_click"/>
                                        <Button Content="Delete Quiz" Width="120" Click="DeleteQuizes_click"/>
                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>

                        <!-- QUESTIONSTAB TAB -->
                        <TabItem Header="Questions">
                            <ScrollViewer>
                                <Grid Margin="10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- question list -->
                                    <DataGrid x:Name="QuestionsGrid"
                                          AutoGenerateColumns="True"
                                          IsReadOnly="False"
                                          Grid.Row="0"
                                          Margin="0,0,0,10"
                                          AlternatingRowBackground="#F7F9FA"
                                          BorderBrush="#BDC3C7"
                                          BorderThickness="1"/>

                                    <!-- Buttons -->
                                    <StackPanel Orientation="Horizontal"
                                        HorizontalAlignment="Right"
                                        Grid.Row="1">
                                        <Button Content="Save Changes" Width="120" Click="SaveQuizes_click"/>
                                        <Button Content="Delete Question" Width="120" Click="DeleteQuizes_click"/>
                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>
                        <!-- aNSWERS TAB -->
                        <TabItem Header="Answers">
                            <ScrollViewer>
                                <Grid Margin="10">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <!-- question list -->
                                    <DataGrid x:Name="AnsweresGrid"
                                          AutoGenerateColumns="True"
                                          IsReadOnly="False"
                                          Grid.Row="0"
                                          Margin="0,0,0,10"
                                          AlternatingRowBackground="#F7F9FA"
                                          BorderBrush="#BDC3C7"
                                          BorderThickness="1"/>

                                    <!-- Buttons -->
                                    <StackPanel Orientation="Horizontal"
                                            HorizontalAlignment="Right"
                                            Grid.Row="1">
                                        <Button Content="Save Changes" Width="120" Click="SaveQuizes_click"/>
                                        <Button Content="Delete Question" Width="120" Click="DeleteQuizes_click"/>
                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>
                        </TabItem>
                    </TabControl>
                </DockPanel>
            </Border>
        </Grid>
        
        <Grid x:Name="leaderBoardScreen" Visibility="Collapsed">
            <!-- Background -->
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#1e3799" Offset="0"/>
                    <GradientStop Color="#0c2461" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>

            <!-- Leaderboard Card -->
            <Border Background="White"
                CornerRadius="25"
                Padding="40"
                Width="700"
                Height="500"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
                <Border.Effect>
                    <DropShadowEffect ShadowDepth="10" BlurRadius="25" Opacity="0.3"/>
                </Border.Effect>

                <StackPanel>
                    <!-- Header -->
                    <TextBlock Text="🏆 LEADERBOARD"
                           FontSize="36" FontWeight="Bold"
                           Foreground="#2C3E50"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20"/>

                    <!-- DataGrid for scores -->
                    <ScrollViewer>
                        <Grid Margin="10">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- question list -->
                            <DataGrid x:Name="LeaderBoardGrid"
                                          AutoGenerateColumns="True"
                                          IsReadOnly="False"
                                          Grid.Row="0"
                                          Margin="0,0,0,10"
                                          AlternatingRowBackground="#F7F9FA"
                                          BorderBrush="#BDC3C7"
                                          BorderThickness="1"/>

                        </Grid>
                    </ScrollViewer>

                    <!-- Back Button -->
                    <Button Content="Back to Main Menu"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Width="250" Height="50"
                        HorizontalAlignment="Center"
                        Margin="0,20,0,0"
                        Click="BackButton"/>
                </StackPanel>
            </Border>
        </Grid>

    </Grid>
</Window>